# This file has been generated by `make_travis_yml_2.hs`
# see https://github.com/hvr/multi-ghc-travis for more information
language: c
sudo: false

# Handle git submodules yourself
git:
    submodules: false

cache:
  directories:
    - $HOME/.cabal/packages
    - $HOME/.cabal/store
    - $HOME/.ambiata

before_cache:
  - rm -fv $HOME/.cabal/packages/hackage.haskell.org/build-reports.log

matrix:
  include:
    - env: CABALVER=1.22 GHCVER=7.10.3
      compiler: ": #GHC 7.10.3"
      addons: {apt: {packages: [cabal-install-1.22,ghc-7.10.3], sources: [hvr-ghc]}}

before_install:
 - unset CC
 - export PATH=/opt/ghc/$GHCVER/bin:/opt/cabal/$CABALVER/bin:$PATH
 - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
 - git submodule init
 - git submodule sync
 - git submodule update
 - ghc --version
 - cabal --version
 - ./mafia -v
 - cabal update

install:
 - ./mafia build

# Here starts the actual work to be performed for the package under test;
# any command which exits with a non-zero exit code causes the build to fail.
script:
 - ./mafia test

# EOF
